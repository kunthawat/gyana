{% load static %}

{{ form.media.js }}

<div class="flex h-full">
  <div class="flex flex-col flex-1">
    <div class='widget-update-sidebar'>

      <turbo-frame id="widget-editable-name" class="workflow-detail__header">
        {% include 'widgets/name.html' %}
      </turbo-frame>

      <div class="tabbar">
        <a
          href="{% url "dashboard_widgets:update" project.id dashboard.id object.pk %}?tab=source"
          class="tabbar__link {% if tab == 'source' %}tabbar__link--active{% endif %}"
          data-action='tf-modal#changeTab'
        >
          Source
        </a>
        <a
         {% if object.table %}href="{% url "dashboard_widgets:update" project.id dashboard.id object.pk %}"{% endif %}
          class="tabbar__link {% if tab == 'data' %}tabbar__link--active{% endif %}{% if not object.table %}tabbar__link--disabled{% endif %}"
          data-action='tf-modal#changeTab'
        >
          Data
        </a>
        <a
          href="{% url "dashboard_widgets:update" project.id dashboard.id object.pk %}?tab=style"
          class="tabbar__link {% if tab == 'style' %}tabbar__link--active{% endif %}"
          data-action='tf-modal#changeTab'
        >
          Style
        </a>
      </div>

      {% if tab == 'style' %}
        {% include 'widgets/forms/style.html' %}
      {% elif tab == 'source' %}
        {% include 'widgets/forms/source.html' %}
      {% else %}
        {% include 'widgets/forms/data.html' %}
      {% endif %}
    </div>
  </div>

  <turbo-frame
    class="overflow-hidden flex flex-col flex-1" 
    id="widgets-output-{{ widget.id }}-modal"
    src="{% url 'dashboard_widgets:output' project.id dashboard.id object.id %}?source=modal"
  >
    {% include 'widgets/modal_nav_bar.html' %}

    <div class='placeholder-scr placeholder-scr--fillscreen'>
      <i class="placeholder-scr__icon fad fa-spinner-third fa-spin"></i>
      <p class='placeholder-scr__title'>Loading widget...</p>
    </div>
  </turbo-frame>
</div>